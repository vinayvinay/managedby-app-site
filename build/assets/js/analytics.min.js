const AnalyticsManager={config:{trackingId:"G-26Q381MZD0",conversionLabels:{lead_generation:"lead_generation"}},isLoaded:!1,init(){if(this.isLoaded)return;function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],window.gtag=e,e("js",new Date),e("config",this.config.trackingId);const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${this.config.trackingId}`,document.head.appendChild(t),this.isLoaded=!0,this.setupEventTracking(),this.setupScrollTracking()},trackEvent(e,t="cta_click",n=1){window.gtag&&"function"==typeof window.gtag&&gtag("event",t,{event_category:"engagement",event_label:e,value:n,user_type:UserDetection.getUserType(),traffic_source:UserDetection.getTrafficSource()})},trackConversion(e,t=1){window.gtag&&"function"==typeof window.gtag&&gtag("event","conversion",{send_to:`${this.config.trackingId}/${e}`,value:t,currency:"GBP",user_type:UserDetection.getUserType(),traffic_source:UserDetection.getTrafficSource()})},setupEventTracking(){[{selector:'a[href*="wa.me"]',label:"whatsapp"},{selector:'a[href*="calendly"]',label:"calendly"},{selector:'a[href*="mailto:"]',label:"email"}].forEach(e=>{document.querySelectorAll(e.selector).forEach(t=>{t.addEventListener("click",()=>{this.trackEvent(e.label),["whatsapp","calendly","email"].includes(e.label)&&this.trackConversion(this.config.conversionLabels.lead_generation)})})});const e=document.getElementById("open-modal");e&&e.addEventListener("click",()=>{this.trackEvent("modal_open")}),this.setupSectionTracking()},setupSectionTracking(){const e={},t=new IntersectionObserver(t=>{t.forEach(t=>{const n=t.target.id;if(t.isIntersecting)e[n]=Date.now();else if(e[n]){const t=Date.now()-e[n];t>1e3&&window.gtag&&"function"==typeof window.gtag&&gtag("event","section_engagement",{event_category:"engagement",event_label:n,value:Math.round(t/1e3)}),delete e[n]}})},{threshold:.5});["hero-section","how-we-are-different-section","how-can-we-help-section","cta-section"].forEach(e=>{const n=document.getElementById(e);n&&t.observe(n)})},setupScrollTracking(){const e=[25,50,75,90],t=[];let n;window.addEventListener("scroll",()=>{n||(n=setTimeout(()=>{(()=>{const n=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);e.forEach(e=>{n>=e&&!t.includes(e)&&(t.push(e),window.gtag&&"function"==typeof window.gtag&&gtag("event","scroll_depth",{event_category:"engagement",event_label:`${e}_percent`,value:e}))})})(),n=null},250))})}};window.AnalyticsManager=AnalyticsManager;